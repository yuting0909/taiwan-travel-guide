(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51f75fb2"],{"43b6":function(e,t,a){"use strict";a("f64d")},"89ad":function(e,t,a){"use strict";a.r(t);a("ac1f"),a("841c"),a("b0c0");var n=a("7a23"),r=a("f8b4"),o=a.n(r),c=function(e){return Object(n["pushScopeId"])("data-v-edd9a13e"),e=e(),Object(n["popScopeId"])(),e},i={class:"restaurants pt-md-5"},s={class:"container py-5"},l={"aria-label":"breadcrumb mb-6"},m={class:"breadcrumb fs-5"},u=c((function(){return Object(n["createElementVNode"])("li",{class:"breadcrumb-item text-primary"},[Object(n["createElementVNode"])("a",{href:"#"},"首頁")],-1)})),d=c((function(){return Object(n["createElementVNode"])("li",{class:"breadcrumb-item text-primary"},[Object(n["createElementVNode"])("a",{href:"#/restaurants"},"品嘗美食")],-1)})),p={class:"breadcrumb-item active","aria-current":"page"},b={key:1,class:"breadcrumb-item active","aria-current":"page"},g={class:"filter-section mb-6"},h={class:"row gx-3"},f={class:"col-md-3"},j={class:"col-md-3"},O={class:"col-md-4"},y={class:"col-md-2"},x=c((function(){return Object(n["createElementVNode"])("i",{class:"bi bi-search me-2"},null,-1)})),w=Object(n["createTextVNode"])("搜 尋 "),v=[x,w],V={key:0,class:"category-section mb-6"},N=c((function(){return Object(n["createElementVNode"])("h1",{class:"fs-2 fw-light mb-3"},"熱門主題",-1)})),C={class:"row g-3"},k=["onClick"],E=["src","alt"],B={class:"fs-3 fw-bold text-white position-absolute"},R={key:1,class:"filter-results mb-6"},M={class:"fs-2 fw-light mb-3"},H=Object(n["createTextVNode"])(" 搜尋結果 "),D={class:"fs-4 text-secondary"},P=Object(n["createTextVNode"])("共有 "),T={class:"text-warning"},G=Object(n["createTextVNode"])(" 筆"),S={class:"row gy-3 mb-6"},L={key:1,class:"text-center"},q=c((function(){return Object(n["createElementVNode"])("img",{class:"mb-3",src:o.a,alt:"目前查無資料 請重新搜尋"},null,-1)})),U=c((function(){return Object(n["createElementVNode"])("h3",{class:"text-primary fw-bolder lh-lg"},[Object(n["createTextVNode"])(" 目前查無資料 "),Object(n["createElementVNode"])("br"),Object(n["createTextVNode"])(" 請重新搜尋 ")],-1)})),$=[q,U];function A(e,t,a,r,o,c){var x=Object(n["resolveComponent"])("Loading"),w=Object(n["resolveComponent"])("DropdownCity"),q=Object(n["resolveComponent"])("DropdownCategory"),U=Object(n["resolveComponent"])("GeneralCard"),A=Object(n["resolveComponent"])("Pagination");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])(x,{active:o.isLoading},null,8,["active"]),Object(n["createElementVNode"])("div",i,[Object(n["createElementVNode"])("div",s,[Object(n["createElementVNode"])("nav",l,[Object(n["createElementVNode"])("ol",m,[u,o.currentCategory?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[d,Object(n["createElementVNode"])("li",p,Object(n["toDisplayString"])(o.currentCategory),1)],64)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",b," 品嘗美食 "))])]),Object(n["createElementVNode"])("section",g,[Object(n["createElementVNode"])("div",h,[Object(n["createElementVNode"])("div",f,[Object(n["createVNode"])(w,{onSendCity:c.updateTempCity},null,8,["onSendCity"])]),Object(n["createElementVNode"])("div",j,[Object(n["createVNode"])(q,{listItems:c.categoryList,tempCategory:o.tempCategory,onSendCategory:c.updateTempCategory},null,8,["listItems","tempCategory","onSendCategory"])]),Object(n["createElementVNode"])("div",O,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{class:"border rounded bg-light fs-5 px-3 py-2 w-100 mb-2",type:"text",placeholder:"你想去哪裡？請輸入關鍵字","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.keyword=e})},null,512),[[n["vModelText"],o.keyword]])]),Object(n["createElementVNode"])("div",y,[Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-primary fs-5 text-white w-100",onClick:t[1]||(t[1]=function(){return c.searchHandler&&c.searchHandler.apply(c,arguments)})},v)])])]),o.search?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("section",V,[N,Object(n["createElementVNode"])("div",C,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(o.categories,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:e.name,class:"col-sm-6 col-md-4 col-lg-3"},[Object(n["createElementVNode"])("a",{class:"category-img rounded-3 position-relative",href:"#",onClick:Object(n["withModifiers"])((function(t){return c.categoryHandler(e)}),["prevent"])},[Object(n["createElementVNode"])("img",{class:"object-fit-cover",src:e.imgUrl,alt:e.name},null,8,E),Object(n["createElementVNode"])("h2",B,Object(n["toDisplayString"])(e.name),1)],8,k)])})),128))])])),o.search?(Object(n["openBlock"])(),Object(n["createElementBlock"])("section",R,[Object(n["createElementVNode"])("h1",M,[H,Object(n["createElementVNode"])("span",D,[P,Object(n["createElementVNode"])("span",T,Object(n["toDisplayString"])(o.pagination.totalResult),1),G])]),o.tempRestaurants.length?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[Object(n["createElementVNode"])("div",S,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(o.tempRestaurants,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:e.ID,class:"col-sm-6 col-md-4 col-lg-3"},[Object(n["createVNode"])(U,{item:e,cardPath:"restaurants"},null,8,["item"])])})),128))]),Object(n["createVNode"])(A,{pages:o.pagination,onUpdatePage:c.filterRestaurants},null,8,["pages","onUpdatePage"])],64)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",L,$))])):Object(n["createCommentVNode"])("",!0)])])],64)}var F=a("2909"),I=(a("99af"),a("b64b"),a("4de4"),a("d3b7"),a("466d"),a("fb6a"),a("a9e3"),a("4afd")),W=a("38c6"),Y=a("b562"),J=a("1799"),_=a("3b94"),z={components:{DropdownCity:I["a"],DropdownCategory:W["a"],GeneralCard:Y["a"],Pagination:J["a"]},data:function(){return{categories:[{name:"地方特產",imgUrl:"https://images.unsplash.com/photo-1589553288887-3ee1f709e119?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=ˋㄢ&q=80",value:"地方特產"},{name:"中式美食",imgUrl:"https://images.unsplash.com/photo-1551851300-1fd39219a668?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=ˋ400&q=80",value:"中式美食"},{name:"異國料理",imgUrl:"https://images.unsplash.com/photo-1615937657715-bc7b4b7962c1?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=400&q=80",value:"異國料理"},{name:"素食",imgUrl:"https://images.unsplash.com/photo-1610348716634-e0428d922116?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=400&q=80",value:"素食"},{name:"甜點冰品",imgUrl:"https://images.unsplash.com/photo-1470124182917-cc6e71b22ecc?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=400&q=80",value:"甜點冰品"},{name:"伴手禮",imgUrl:"https://images.unsplash.com/photo-1630859288268-d11728472a25?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=400&q=80",value:"伴手禮"}],search:!1,currentCategory:"",tempCategory:{},tempCity:"",keyword:"",restaurants:[],tempRestaurants:[],pagination:{},position:{},isLoading:!1}},computed:{categoryList:function(){var e=[{name:"全部主題"}];return e.concat(this.categories)}},methods:{searchHandler:function(){this.search=!0,this.currentCategory=this.tempCategory.name,this.tempCity?this.getCityRestaurants():this.getRestaurants()},categoryHandler:function(e){this.search=!0,this.updateTempCategory(e),this.currentCategory=e.name,this.filterRestaurants()},updateTempCategory:function(e){this.tempCategory=e},updateTempCity:function(e){this.tempCity=e},getRestaurants:function(){var e=this;this.isLoading=!0;var t="https://ptx.transportdata.tw/MOTC/v2/Tourism/Restaurant?$format=JSON";Object.keys(this.position).length&&(t="https://ptx.transportdata.tw/MOTC/v2/Tourism/Restaurant?$spatialFilter=nearby(".concat(this.position.lat,",").concat(this.position.lon,",2000)&$format=JSON"),this.search=!0),this.axios({method:"get",url:t,headers:Object(_["a"])()}).then((function(t){e.restaurants=t.data,e.filterRestaurants(),e.isLoading=!1})).catch((function(e){console.log(e)}))},getCityRestaurants:function(){var e=this;this.isLoading=!0,this.axios({method:"get",url:"https://ptx.transportdata.tw/MOTC/v2/Tourism/Restaurant/".concat(this.tempCity,"?$format=JSON"),headers:Object(_["a"])()}).then((function(t){e.restaurants=t.data,e.filterRestaurants(),e.isLoading=!1})).catch((function(e){console.log(e)}))},filterRestaurants:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.tempRestaurants=Object(F["a"])(this.restaurants),this.tempCategory.value&&(this.tempRestaurants=this.tempRestaurants.filter((function(t){return t.Class===e.tempCategory.value}))),this.keyword&&(this.tempRestaurants=this.tempRestaurants.filter((function(t){return t.Name.match(e.keyword)}))),this.pagination.totalResult=this.tempRestaurants.length,this.pagination.perPage=20,this.pagination.totalPages=Math.ceil(this.pagination.totalResult/this.pagination.perPage),this.pagination.currentPage=t,this.pagination.currentPage>this.pagination.totalPages&&(this.pagination.currentPage=this.pagination.totalPages),this.pagination.showPageStart=t-3,this.pagination.showPageEnd=t+3;var a=this.pagination.currentPage*this.pagination.perPage-this.pagination.perPage,n=this.pagination.currentPage*this.pagination.perPage-1;this.tempRestaurants=this.tempRestaurants.slice(a,n+1)}},created:function(){this.$route.query.lat&&this.$route.query.lon&&(this.position={lat:Number(this.$route.query.lat),lon:Number(this.$route.query.lon)}),this.getRestaurants()}},K=(a("43b6"),a("6b0d")),Q=a.n(K);const X=Q()(z,[["render",A],["__scopeId","data-v-edd9a13e"]]);t["default"]=X},f64d:function(e,t,a){}}]);
//# sourceMappingURL=chunk-51f75fb2.c93d4e9a.js.map