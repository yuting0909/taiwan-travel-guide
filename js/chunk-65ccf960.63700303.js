(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65ccf960"],{2184:function(e,t,a){"use strict";a("224f")},"224f":function(e,t,a){},5159:function(e,t,a){"use strict";a.r(t);a("ac1f"),a("841c"),a("b0c0");var c=a("7a23"),o=a("f8b4"),n=a.n(o),i=function(e){return Object(c["pushScopeId"])("data-v-448ffd6b"),e=e(),Object(c["popScopeId"])(),e},r={class:"scenic-spots pt-md-5"},s={class:"container py-5"},l={"aria-label":"breadcrumb mb-6"},p={class:"breadcrumb fs-5"},m=i((function(){return Object(c["createElementVNode"])("li",{class:"breadcrumb-item text-primary"},[Object(c["createElementVNode"])("a",{href:"#"},"首頁")],-1)})),d=i((function(){return Object(c["createElementVNode"])("li",{class:"breadcrumb-item text-primary"},[Object(c["createElementVNode"])("a",{href:"#/scenic-spots"},"探索景點")],-1)})),b={class:"breadcrumb-item active","aria-current":"page"},u={key:1,class:"breadcrumb-item active","aria-current":"page"},f={class:"filter-section mb-6"},g={class:"row gx-3"},h={class:"col-md-3"},j={class:"col-md-3"},O={class:"col-md-4"},y={class:"col-md-2"},x=i((function(){return Object(c["createElementVNode"])("i",{class:"bi bi-search me-2"},null,-1)})),S=Object(c["createTextVNode"])("搜 尋 "),w=[x,S],v={key:0,class:"category-section mb-6"},C=i((function(){return Object(c["createElementVNode"])("h1",{class:"fs-2 fw-light mb-3"},"熱門主題",-1)})),V={class:"row g-3"},N=["onClick"],k=["src","alt"],E={class:"fs-3 fw-bold text-white position-absolute"},B={key:1,class:"filter-results mb-6"},M={class:"fs-2 fw-light mb-3"},H=Object(c["createTextVNode"])(" 搜尋結果 "),D={class:"fs-4 text-secondary"},P=Object(c["createTextVNode"])("共有 "),T={class:"text-warning"},G=Object(c["createTextVNode"])(" 筆"),q={class:"row gy-3 mb-6"},L={key:1,class:"text-center"},U=i((function(){return Object(c["createElementVNode"])("img",{class:"mb-3",src:n.a,alt:"目前查無資料 請重新搜尋"},null,-1)})),$=i((function(){return Object(c["createElementVNode"])("h3",{class:"text-primary fw-bolder lh-lg"},[Object(c["createTextVNode"])(" 目前查無資料 "),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])(" 請重新搜尋 ")],-1)})),A=[U,$];function W(e,t,a,o,n,i){var x=Object(c["resolveComponent"])("Loading"),S=Object(c["resolveComponent"])("DropdownCity"),U=Object(c["resolveComponent"])("DropdownCategory"),$=Object(c["resolveComponent"])("GeneralCard"),W=Object(c["resolveComponent"])("Pagination");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(x,{active:n.isLoading},null,8,["active"]),Object(c["createElementVNode"])("div",r,[Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("nav",l,[Object(c["createElementVNode"])("ol",p,[m,n.currentCategory?(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:0},[d,Object(c["createElementVNode"])("li",b,Object(c["toDisplayString"])(n.currentCategory),1)],64)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("li",u," 探索景點 "))])]),Object(c["createElementVNode"])("section",f,[Object(c["createElementVNode"])("div",g,[Object(c["createElementVNode"])("div",h,[Object(c["createVNode"])(S,{onSendCity:i.updateTempCity},null,8,["onSendCity"])]),Object(c["createElementVNode"])("div",j,[Object(c["createVNode"])(U,{listItems:i.categoryList,tempCategory:n.tempCategory,onSendCategory:i.updateTempCategory},null,8,["listItems","tempCategory","onSendCategory"])]),Object(c["createElementVNode"])("div",O,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"border rounded bg-light fs-5 px-3 py-2 w-100 mb-2",type:"text",placeholder:"你想去哪裡？請輸入關鍵字","onUpdate:modelValue":t[0]||(t[0]=function(e){return n.keyword=e})},null,512),[[c["vModelText"],n.keyword]])]),Object(c["createElementVNode"])("div",y,[Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-primary fs-5 text-white w-100",onClick:t[1]||(t[1]=function(){return i.searchHandler&&i.searchHandler.apply(i,arguments)})},w)])])]),n.search?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("section",v,[C,Object(c["createElementVNode"])("div",V,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(n.categories,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:e.name,class:"col-sm-6 col-md-4 col-lg-3"},[Object(c["createElementVNode"])("a",{class:"category-img rounded-3 position-relative",href:"#",onClick:Object(c["withModifiers"])((function(t){return i.categoryHandler(e)}),["prevent"])},[Object(c["createElementVNode"])("img",{class:"object-fit-cover",src:e.imgUrl,alt:e.name},null,8,k),Object(c["createElementVNode"])("h2",E,Object(c["toDisplayString"])(e.name),1)],8,N)])})),128))])])),n.search?(Object(c["openBlock"])(),Object(c["createElementBlock"])("section",B,[Object(c["createElementVNode"])("h1",M,[H,Object(c["createElementVNode"])("span",D,[P,Object(c["createElementVNode"])("span",T,Object(c["toDisplayString"])(n.pagination.totalResult),1),G])]),n.tempScenicSpots.length?(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:0},[Object(c["createElementVNode"])("div",q,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(n.tempScenicSpots,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:e.ID,class:"col-sm-6 col-md-4 col-lg-3"},[Object(c["createVNode"])($,{item:e,cardPath:"scenic-spots"},null,8,["item"])])})),128))]),Object(c["createVNode"])(W,{pages:n.pagination,onUpdatePage:i.filterScenicSpots},null,8,["pages","onUpdatePage"])],64)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",L,A))])):Object(c["createCommentVNode"])("",!0)])])],64)}var Y=a("2909"),F=(a("99af"),a("b64b"),a("4de4"),a("d3b7"),a("466d"),a("fb6a"),a("a9e3"),a("4afd")),I=a("38c6"),J=a("b562"),R=a("1799"),_=a("3b94"),z={components:{DropdownCity:F["a"],DropdownCategory:I["a"],GeneralCard:J["a"],Pagination:R["a"]},data:function(){return{categories:[{name:"自然風景類",imgUrl:"https://images.unsplash.com/photo-1626364424120-81fcc7f06ebd?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=400&q=80",value:"自然風景類"},{name:"觀光工廠類",imgUrl:"https://images.unsplash.com/photo-1572913017567-02f0649bc4fd?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=400&q=80",value:"觀光工廠類"},{name:"遊憩類",imgUrl:"https://images.unsplash.com/photo-1574674487139-fdefb8f26f69?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=400&q=80",value:"遊憩類"},{name:"休閒農業類",imgUrl:"https://images.unsplash.com/photo-1461354464878-ad92f492a5a0?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=400&q=80",value:"休閒農業類"},{name:"生態類",imgUrl:"https://images.unsplash.com/photo-1437622368342-7a3d73a34c8f?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=400&q=80",value:"生態類"},{name:"溫泉類",imgUrl:"https://images.unsplash.com/photo-1580215063967-3a846fb57067?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=400&q=80",value:"溫泉類"},{name:"古蹟類",imgUrl:"https://images.unsplash.com/photo-1600168488491-03d6c3486ab5?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=400&q=80",value:"古蹟類"}],search:!1,currentCategory:"",tempCategory:{},tempCity:"",keyword:"",scenicSpots:[],tempScenicSpots:[],pagination:{},position:{},isLoading:!1}},computed:{categoryList:function(){var e=[{name:"全部主題",value:""}];return e.concat(this.categories)}},methods:{getScenicSpots:function(){var e=this;this.isLoading=!0;var t="https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot?$format=JSON";Object.keys(this.position).length&&(t="https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot?$spatialFilter=nearby(".concat(this.position.lat,",").concat(this.position.lon,",2000)&$format=JSON"),this.search=!0),this.axios({method:"get",url:t,headers:Object(_["a"])()}).then((function(t){e.scenicSpots=t.data,e.filterScenicSpots(),e.isLoading=!1})).catch((function(e){console.log(e)}))},getCitySpots:function(){var e=this;this.isLoading=!0,this.axios({method:"get",url:"https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot/".concat(this.tempCity,"?$format=JSON"),headers:Object(_["a"])()}).then((function(t){e.scenicSpots=t.data,e.filterScenicSpots(),e.isLoading=!1})).catch((function(e){console.log(e)}))},searchHandler:function(){this.search=!0,this.currentCategory=this.tempCategory.name,this.tempCity?this.getCitySpots():this.getScenicSpots()},categoryHandler:function(e){this.search=!0,this.updateTempCategory(e),this.currentCategory=e.name,this.filterScenicSpots()},updateTempCategory:function(e){this.tempCategory=e},updateTempCity:function(e){this.tempCity=e},filterScenicSpots:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.tempScenicSpots=Object(Y["a"])(this.scenicSpots),this.tempCategory.value&&(this.tempScenicSpots=this.tempScenicSpots.filter((function(t){return t.Class1===e.tempCategory.value||t.Class2===e.tempCategory.value||t.Class3===e.tempCategory.value}))),this.keyword&&(this.tempScenicSpots=this.tempScenicSpots.filter((function(t){return t.Name.match(e.keyword)}))),this.pagination.totalResult=this.tempScenicSpots.length,this.pagination.perPage=20,this.pagination.totalPages=Math.ceil(this.pagination.totalResult/this.pagination.perPage),this.pagination.currentPage=t,this.pagination.currentPage>this.pagination.totalPages&&(this.pagination.currentPage=this.pagination.totalPages),this.pagination.showPageStart=t-3,this.pagination.showPageEnd=t+3;var a=this.pagination.currentPage*this.pagination.perPage-this.pagination.perPage,c=this.pagination.currentPage*this.pagination.perPage-1;this.tempScenicSpots=this.tempScenicSpots.slice(a,c+1)}},created:function(){this.$route.query.lat&&this.$route.query.lon&&(this.position={lat:Number(this.$route.query.lat),lon:Number(this.$route.query.lon)}),this.getScenicSpots()}},K=(a("2184"),a("6b0d")),Q=a.n(K);const X=Q()(z,[["render",W],["__scopeId","data-v-448ffd6b"]]);t["default"]=X}}]);
//# sourceMappingURL=chunk-65ccf960.63700303.js.map